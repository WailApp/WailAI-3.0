<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>WailΛI</title>
  <!-- Linking Google Fonts For Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism.min.css" rel="stylesheet" />
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link rel="stylesheet" href="style.css">
  <meta name="msapplication-TileImage" content="icon.svg">
  <link rel="icon" type="image/png" href="icon.svg">
  <link rel="apple-touch-icon" href="icon.svg" sizes="512x512">
  <meta name="author" content="WailTech">
  
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-storage-compat.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-javascript.min.js"></script>
  <script src="data.js" defer></script>
  <script src="auth-check.js" defer></script>
  <script type="importmap"></script>
  <script src="formatText.js"></script>
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <header class="header">
    <div class="logo-container2">
      <img class="avatar" src="icon.svg" alt="WailAI">
    </div>
  </header>
  <style>
    .header {
    position: fixed;
    }
.code-block {
    font-family: 'Courier New', Courier, monospace; /* تغيير الخط */
    background-color: #282c34; /* لون الخلفية */
    color: #dcdcdc; /* لون النص */
    padding: 10px; /* حواف */
    border-radius: 5px; /* زوايا دائرية */
    display: block; /* جعل العنصر يظهر ككتلة */
    white-space: pre; /* الحفاظ على الفراغات */
}
  </style>
  <script>
    if (
      // فحص لأي متصفح قديم غير مدعوم
      navigator.userAgent.indexOf('MSIE') !== -1 || 
      navigator.userAgent.indexOf('Trident/') > 0 || 
      navigator.userAgent.indexOf('Opera') !== -1 || 
      navigator.userAgent.indexOf('Edge') !== -1 || 
      (navigator.userAgent.indexOf('Chrome') !== -1 && parseInt(navigator.userAgent.match(/Chrome\/(\d+)/)[1], 10) < 50) || 
      (navigator.userAgent.indexOf('Safari') !== -1 && navigator.userAgent.indexOf('Version/') !== -1 && parseInt(navigator.userAgent.match(/Version\/(\d+)/)[1], 10) < 10)
    ) {
      console.log('المتصفح غير مدعوم للخدمات الجديدة والإشعارات.');
      window.location.href = 'unsupported-browser.html';
    } else {
      console.log('المتصفح مدعوم للخدمات الجديدة والإشعارات.');
    }
    // منع المستخدم من تحديد النص في الصفحة
document.addEventListener('selectstart', (event) => {
  event.preventDefault();
});
    self.addEventListener('install', (event) => {
  console.log('Service worker installed');
});

self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request).then((response) => {
      return response || fetch(event.request);
    })
  );
});
    if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/service-worker.js').then((registration) => {
      console.log('Service Worker registered with scope: ', registration.scope);
    }).catch((error) => {
      console.log('Service Worker registration failed: ', error);
    });
  });
    }

  </script>
  <!-- Main Content -->
  <main class="main-content">
    <header class="header2">
      <div class="logo-container">
        <h1 class="title">Introducing WailΛI</h1>
        <h4 class="subtitle">Welcome to WailΛI, the best site for simple artificial intelligence. Discover our features</h4>
      </div>
      <!-- Suggestion list -->
      <ul class="suggestion-list">
        <li class="suggestion">
          <h4 class="text">Latest features in artificial intelligence</h4>
          <span class="icon material-symbols-rounded">new_releases</span>
          <div class="progress-bar"></div>  
        </li>
        <li class="suggestion">
          <h4 class="text">How many GTA games have been released and which one is the latest?</h4>
          <span class="icon material-symbols-rounded">stadia_controller</span>
          <div class="progress-bar"></div>  
        </li>
        <li class="suggestion">
          <h4 class="text" align="center">Give me some ideas to start my day with.</h4>
          <span class="icon material-symbols-rounded">lightbulb</span>
          <div class="progress-bar"></div>  
        </li>
        <li class="suggestion">
          <h4 class="text">I want to find out how artificial intelligence works.</h4>
          <span class="icon material-symbols-rounded">explore</span>
          <div class="progress-bar"></div>  
        </li>
        <li class="suggestion">
          <h4 class="text">Write me a simple Python code.</h4>
          <span class="icon material-symbols-rounded">code</span>
          <div class="progress-bar"></div>  
        </li>
        <li class="suggestion">
          <h4 class="text">How do I use Photoshop?</h4>
          <span class="icon material-symbols-rounded">photo_camera</span>
          <div class="progress-bar"></div>  
        </li>
        <li class="suggestion">
          <h4 class="text">Ten famous songs in the world</h4>
          <span class="icon material-symbols-rounded">music_note</span>
          <div class="progress-bar"></div>  
        </li>
        <li class="suggestion">
          <h4 class="text">How do I shoot a movie?</h4>
          <span class="icon material-symbols-rounded">videocam</span>
          <div class="progress-bar"></div>  
        </li>
        <li class="suggestion">
          <h4 class="text">I want to add more of your suggestions...</h4>
          <span class="icon material-symbols-rounded">more_horiz</span>
          <div class="progress-bar"></div>  
        </li>
      </ul>
      <p class="disclaimer-text">
          WailΛI can make mistakes. Please check the information.
      </p>
    </header>
    <div class="chat-list"></div>
    <!-- Typing Area -->
    <div class="typing-area">
      <form action="#" class="typing-form">
        <div class="input-wrapper">
          <input type="text" placeholder="Ask WailΛI" class="typing-input" required />
          <button id="send-message-button" class="icon material-symbols-rounded">arrow_upward</button>
        </div>
        <div class="action-buttons">
          <span href="settings.html" class="icon material-symbols-rounded settings-chat-button" style="background-color: var(--secondary-color); color: var(--text-color)">account_circle</span>
          <span id="delete-chat-button" class="icon material-symbols-rounded">replay</span>
        </div>
      </form>
    </div>
  </main>
  <div id="context-menu" class="context-menu non-selectable">
    <ul>
        <li id="copy"><span class="icon material-symbols-rounded"></span>Copy All</li>
    </ul>
  </div>

  <script src="script.js"></script>
  <script>
// إضافة معالج حدث للنقر على زر الإعدادات
document.querySelector('.settings-chat-button').addEventListener('click', () => {
    const targetUrl = 'settings.html';
    window.location.href = targetUrl;
});

document.getElementById('copy').addEventListener('click', () => {
    const inputField = document.querySelector('.typing-input');

    if (inputField) {
        // نسخ النص إلى الحافظة
        navigator.clipboard.writeText(inputField.value).then(() => {
            // إنشاء الرسالة عند النسخ بنجاح
            const errorMessageDiv = document.createElement('div');
            errorMessageDiv.className = 'error-message';
            errorMessageDiv.innerHTML = `
                <span class="error-text">Copied to clipboard.</span>
                <button class="error-close-button" onclick="this.parentElement.remove()">×</button>
            
            `;

            // إضافة الرسالة إلى الصفحة
            document.body.appendChild(errorMessageDiv);
        }).catch(err => {
            console.error('Failed to copy text: ', err);
        });
    }
});


// تشغيل المحتوى كـ HTML في نافذة جديدة
document.getElementById("html").addEventListener("click", function() {
    const htmlContent = document.getElementById("code").value;
    const newWindow = window.open();
    newWindow.document.write(htmlContent);
    newWindow.document.close();
});

// تحديد الكل
document.getElementById('select-all').addEventListener('click', () => {
    const inputField = document.querySelector('.typing-input');
    if (inputField) {
        inputField.select();
    }
});

// إضافة معالج حدث للنقر على زر الإعدادات
document.querySelector('.settings-chat-button').addEventListener('click', () => {
    const targetUrl = 'settings.html'; 
    window.location.href = targetUrl;
});

  </script>

<script>
  // استهداف السهم
  const scrollArrow = document.getElementById("scrollDownArrow");
  const chatList = document.querySelector(".chat-list"); // استهداف عنصر المحادثات

  // تتبع موضع التمرير السابق
  let lastScrollPosition = chatList.scrollTop;

  // دالة التحقق من التمرير
  chatList.addEventListener("scroll", function() {
    let currentScrollPosition = chatList.scrollTop; // موضع التمرير الحالي داخل chat-list

    // إذا كان المستخدم يتمرر لأعلى، إظهار السهم
    if (currentScrollPosition < lastScrollPosition) {
      scrollArrow.style.display = "block"; // إظهار السهم
    } else {
      scrollArrow.style.display = "none"; // إخفاء السهم إذا كان يتمرر لأسفل
    }

    // تحديث آخر موضع تمرير
    lastScrollPosition = currentScrollPosition;
  });

  // عند الضغط على السهم، الانتقال لنهاية المحادثات
  scrollArrow.addEventListener("click", function() {
    chatList.scrollTo({
      top: chatList.scrollHeight, // الانتقال إلى أسفل chat-list
      behavior: "smooth" // الانتقال بطريقة ناعمة
    });
  });
</script>
  
</body>
</html>
